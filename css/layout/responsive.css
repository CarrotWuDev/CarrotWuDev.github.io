/* ====== 响应式适配 ====== */

/**
 * 断点策略 (Mobile First)
 * - Mobile:  < 768px
 * - Tablet:  768px - 1023px
 * - Desktop: >= 1024px
 */

/* ====== Mobile (<768px) ====== */
@media (max-width: 767px) {

    /* 修复移动端无法滚动的问题：重置 body overflow */
    body {
        overflow: auto;
        height: auto;
    }

    /* 整体布局：从 flex 改为 block，恢复正常文档流 */
    .app {
        display: block;
        height: auto;
        overflow: visible;
    }

    /* 侧边栏：移至顶部，固定定位 */
    /* 侧边栏容器：使用 display: contents "幽灵节点" */
    /* 关键修复：让内部的 .type-nav 直接参与 .app (全高) 的布局上下文 */
    .sidebar-wrapper {
        display: contents;
    }

    /* 1. Profile 区域: 随页面滚动而滚走 */
    /* 1. Profile 区域: 随页面滚动而滚走 */
    .sidebar {
        flex: none;
        width: 100%;
        /* 迁移原 Wrapper 的底边框到这里，作为 Profile 和 Nav 的分隔 */
        border-bottom: 2px solid var(--line);
        padding: var(--space-page-mobile);
        padding-bottom: 12px;
        position: relative;
        /* 关键：不再 Sticky */
        top: auto;
        z-index: 100;
        /* 高于 footer，低于 Nav? */
        overflow: visible;
        background: var(--bg);
        /* 确保背景不透明 */
    }

    /* 2. Nav 区域: 滚动时 Sticky 留驻 */
    .type-nav {
        /* Sticky 核心 */
        position: sticky;
        top: 0;
        z-index: 101;
        /* 保证盖住内容 */
        background: var(--bg);
        /* 必须有背景，否则透明 */
        border-bottom: 2px solid var(--line);
        /* 分隔线 */

        /* Layout */
        flex-direction: row;
        overflow-x: auto;
        gap: 8px;
        padding: 12px var(--space-page-mobile);
        scrollbar-width: none;
        -webkit-overflow-scrolling: touch;
    }

    /* 侧边栏隐藏状态（向下滚动时） */
    .sidebar.header-hidden {
        transform: translateY(-100%);
    }

    /* 个人信息区：紧凑布局 */
    .profile {
        padding-bottom: 12px;
    }

    .profile-header {
        gap: 12px;
    }

    .avatar {
        width: 56px;
        height: 56px;
    }

    .profile-name {
        font-size: 18px;
    }

    .profile-tags {
        margin-top: 10px;
    }

    /* 导航：横向滚动 */
    /* 删除旧的 .type-nav 样式，因为已合并到上方 Sticky 规则中 */
    .type-nav::-webkit-scrollbar {
        display: none;
    }

    .type-nav a {
        white-space: nowrap;
        flex-shrink: 0;
        padding: 8px 12px;
        font-size: 14px;
    }

    /* 隐藏 slogan/copyright（移动端精简） */
    .sidebar-footer {
        display: none;
    }

    /* 主内容区：自然高度，调整间距 */
    .main {
        height: auto;
        overflow: visible;
        padding-inline: var(--space-page-mobile);
    }

    /* 内容区间距调整 */
    #contentRoot {
        gap: var(--space-section-mobile);
        padding-top: var(--space-section-mobile);
        padding-bottom: 60px;
    }

    #contentRoot section+section {
        padding-top: var(--space-section-mobile);
    }
}

/* ====== Tablet (768px - 1023px) ====== */
@media (min-width: 768px) and (max-width: 1023px) {

    /* 侧边栏容器：收窄宽度 */
    .sidebar-wrapper {
        flex: 0 0 220px;
        padding: 20px 14px;
    }

    .sidebar {
        padding: 0;
        /* Reset */
    }

    .avatar {
        width: 64px;
        height: 64px;
    }

    .profile-name {
        font-size: 18px;
    }
}