/* ====== 响应式适配 ====== */

/**
 * 断点策略 (Mobile First)
 * - Mobile:  < 768px
 * - Tablet:  768px - 1023px
 * - Desktop: >= 1024px
 */

/* ====== Mobile (<768px) ====== */
@media (max-width: 767px) {

    /* 修复移动端无法滚动的问题：重置 body overflow */
    body {
        overflow: auto;
        height: auto;
    }

    /* 整体布局：从 flex 改为 block，恢复正常文档流 */
    .app {
        display: block;
        height: auto;
        overflow: visible;
    }

    /* 侧边栏：移至顶部，固定定位 */
    /* 
     * [Layout Change] SideBar 解绑 Sticky
     * 侧边栏不再作为整体固定在顶部。
     * 头像、简介等内容随页面滚动自然划走。
     */
    .sidebar {
        flex: none;
        width: 100%;
        border-right: none;
        border-bottom: 2px solid var(--line);
        padding: 0;
        /* 去除内边距，交给子元素控制，以便 Nav 贴边 */
        overflow: visible;
        position: relative;
        /* 回归相对定位 */
        z-index: 100;
        gap: 0;
        display: block;
        /* 取消 Flex gap */
    }

    /* 个人信息区：正常文档流，有内边距 */
    .profile {
        padding: var(--space-page-mobile);
        padding-bottom: 12px;
        background: var(--bg);
        margin-bottom: 0;
        border-bottom: none;
    }

    /* 
     * [Sticky Nav] 仅导航栏固定
     * 实现 Scroll-to-Hide/Show 的核心容器
     */
    .type-nav {
        flex-direction: row;
        overflow-x: auto;
        gap: 8px;
        padding: 10px var(--space-page-mobile);
        /* 上下内边距 */
        scrollbar-width: none;
        -webkit-overflow-scrolling: touch;

        /* Sticky 设置 */
        position: sticky;
        top: 0;
        z-index: 200;
        background: var(--bg);
        /* 背景色遮挡内容 */
        border-bottom: 2px solid var(--line);
        border-top: 2px solid var(--line);
        /* 增加顶部分割线 */
        transition: transform 0.3s ease;
        /* 显隐动画 */
    }

    /* 导航栏隐藏状态（向下滚动时） (由 JS 控制 .nav-hidden 类) */
    .type-nav.nav-hidden {
        transform: translateY(-100%);
    }

    /* 移除旧的 sidebar 隐藏样式 */
    /* .sidebar.header-hidden { transform: translateY(-100%); } */

    .profile-header {
        gap: 12px;
    }

    .avatar {
        width: 56px;
        height: 56px;
    }

    .profile-name {
        font-size: 18px;
    }

    .profile-tags {
        margin-top: 10px;
        /* 
         * 标签稍微小一点，避免在移动端占太多位置
         */
    }

    .profile-tags .tag {
        font-size: 11px;
        padding: 2px 6px;
    }

    /* .type-nav 样式已合并到上方 Sticky 规则中 */

    .type-nav::-webkit-scrollbar {
        display: none;
    }

    .type-nav a {
        white-space: nowrap;
        flex-shrink: 0;
        padding: 8px 12px;
        font-size: 14px;
    }

    /* 隐藏 slogan/copyright（移动端精简） */
    .sidebar-footer {
        display: none;
    }

    /* 主内容区：自然高度，调整间距 */
    .main {
        height: auto;
        overflow: visible;
        padding-inline: var(--space-page-mobile);
    }

    /* 内容区间距调整 */
    #contentRoot {
        gap: var(--space-section-mobile);
        padding-top: var(--space-section-mobile);
        padding-bottom: 60px;
    }

    #contentRoot section+section {
        padding-top: var(--space-section-mobile);
    }
}

/* ====== Tablet (768px - 1023px) ====== */
@media (min-width: 768px) and (max-width: 1023px) {

    /* 侧边栏：收窄宽度 */
    .sidebar {
        flex: 0 0 220px;
        padding: 20px 14px;
    }

    .avatar {
        width: 64px;
        height: 64px;
    }

    .profile-name {
        font-size: 18px;
    }
}